import cv2
import numpy as np

def qr_to_matrix(image_path):
    # 读取图像并转换为灰度图像
    image = cv2.imread(image_path, cv2.IMREAD_GRAYSCALE)

    # 检查图像是否成功读取
    if image is None:
        raise FileNotFoundError(f"Image file '{image_path}' not found")

    # 将灰度图像转换为二值图像（黑白图像）
    _, binary_image = cv2.threshold(image, 127, 255, cv2.THRESH_BINARY)

    # 转换为矩阵表示（1表示黑色，0表示白色）
    qr_matrix = (binary_image == 0).astype(int)

    return qr_matrix

# 主函数
def main():
    # 替换为你的二维码图像文件路径
    image_path = 'qrcode.jpg'
    qr_matrix = qr_to_matrix(image_path)

    # 打印矩阵
    print("QR Code Matrix:")
    for row in qr_matrix:
        print(" ".join(map(str, row)))

if __name__ == "__main__":
    main()
